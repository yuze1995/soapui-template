<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="85fa6e07-074f-4126-914b-74fba81dec92" activeEnvironment="Default" name="compare-api-response" resourceRoot="" soapui-version="5.4.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="a11f0fbe-01c7-4be8-bc79-ae609d43695b" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://localhost:44355" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://localhost:44355</con:endpoint></con:endpoints><con:resource name="V1" path="/api/v1" id="c9d4a9fe-4f3c-42c1-a4de-95b475c13baa"><con:settings/><con:parameters><con:parameter><con:name>ParameterTemplate1</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter></con:parameters><con:method name="GET - api/v1" id="9aed6db4-d80e-4541-a121-49a47ade4159" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="GetV1" id="2b35afce-9a08-479a-970d-ac604ad493b9" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://localhost:44355</con:endpoint><con:request/><con:originalUri>https://localhost/api/v1</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ParameterTemplate1" value="${#Project#ParameterTemplare1_Value}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ParameterTemplate1</con:entry></con:parameterOrder></con:request></con:method><con:method name="POST - api/v1" id="22f1f333-a6de-48a0-bbb9-c45ee4639c9a" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/problem+json; charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:v1="https://localhost/api/v1">v1:Fault</con:element></con:representation><con:request name="Request 1" id="ae558bd3-bdf1-4796-a82c-3a5a1abbbfc7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://localhost:44355</con:endpoint><con:request>{
    "TestParameter": "1"
}</con:request><con:originalUri>https://localhost/api/v1</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="61042724-a818-4617-bfd8-3f78cbbae3f0" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://localhost:44355" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://localhost:44355</con:endpoint></con:endpoints><con:resource name="V2" path="/api/v2" id="8220be7f-64c3-43a1-9bbf-eb38ac183cce"><con:settings/><con:parameters><con:parameter><con:name>ParameterTemplare2</con:name><con:value>2</con:value><con:style>QUERY</con:style><con:default>2</con:default></con:parameter></con:parameters><con:method name="GET - api/v2" id="1b65dd7a-3254-4e0c-ab99-3178013128bb" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="GetV2" id="93ef2201-ff04-43e0-8124-c3ebd283c51d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://localhost:44355</con:endpoint><con:request/><con:originalUri>https://localhost/api/v2</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ParameterTemplare2" value="${#Project#ParameterTemplare2_Value}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ParameterTemplare2</con:entry></con:parameterOrder></con:request></con:method><con:method name="POST - api/v2" id="0055ed2b-5d96-48f7-9532-3347cf821f2e" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/problem+json; charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:v2="https://localhost/api/v2">v2:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="d1877e22-c97e-4cb9-86d9-c87895cec267" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://localhost:44355</con:endpoint><con:request>{
    "TestParameter": "1"
}</con:request><con:originalUri>https://localhost/api/v2</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="825bb60e-d9a9-48bc-9a21-056677241dc4" name="compare-response"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="70deb42d-75af-4416-a7f1-a38838d291cf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="get-compare" searchProperties="true"><con:settings/><con:testStep type="properties" name="ProcessParameter" id="5adc328f-d634-40a6-ac5d-c8d84f76825f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>now_count</con:name><con:value>1</con:value></con:property><con:property><con:name>max_count</con:name><con:value>2</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="properties" name="Response" id="81c5e63d-cbeb-4d94-9b3d-3c53023f908e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>v1_res</con:name><con:value>[{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Freezing"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Bracing"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Chilly"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Cool"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Mild"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Warm"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Balmy"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Hot"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Sweltering"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Scorching"}]</con:value></con:property><con:property><con:name>v2_res</con:name><con:value>[{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Scorching"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Sweltering"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Hot"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Balmy"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Warm"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Mild"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Cool"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Chilly"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Bracing"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Freezing"}]</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="GetV1" id="1bcb926d-1491-4f8a-9e61-913433bdf833"><con:settings/><con:config service="https://localhost:44355" resourcePath="/api/v1" methodName="GET - api/v1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetV1" id="2b35afce-9a08-479a-970d-ac604ad493b9" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://localhost:44355</con:endpoint><con:request/><con:originalUri>https://localhost/api/v1</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ParameterTemplate1" value="${#Project#ParameterTemplare1_Value}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ParameterTemplate1</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetV2" id="fcb34206-baf9-43e5-92f9-e9c9ec99522b"><con:settings/><con:config service="https://localhost:44355" resourcePath="/api/v2" methodName="GET - api/v2" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetV2" id="93ef2201-ff04-43e0-8124-c3ebd283c51d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://localhost:44355</con:endpoint><con:request/><con:originalUri>https://localhost/api/v2</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ParameterTemplare2" value="${#Project#ParameterTemplare2_Value}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ParameterTemplare2</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="ResponseTransfer" id="0cdc2f5c-33bc-44b3-a24e-bb9bf188a03a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>v1_res_transfer</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>GetV1</con:sourceStep><con:targetType>v1_res</con:targetType><con:targetStep>Response</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>v2_res_transfer</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>GetV2</con:sourceStep><con:targetType>v2_res</con:targetType><con:targetStep>Response</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="CompareResponse" id="a4130b7d-a1fa-4fc3-af72-75061469edae"><con:settings/><con:config><script>import com.eviware.soapui.support.GroovyUtils

def now =  context.expand('${ProcessParameter#now_count}').toInteger()
def maxCount = context.expand('${ProcessParameter#max_count}').toInteger()
	
def v1_res = context.expand('${Response#v1_res}')
def v1_json = new groovy.json.JsonSlurper().parseText(v1_res)
v1_json.sort()

def v2_res = context.expand('${Response#v2_res}')
def v2_json = new groovy.json.JsonSlurper().parseText(v2_res)
v2_json.sort()

log.info (v1_json)
log.info (v2_json)

assert v1_json == v2_json

if (now == maxCount)
{
	testRunner.testCase.getTestStepByName("ProcessParameter").setPropertyValue('now_count','1')
	log.info 'Loop End'
}
else
{	
	now = now + 1
	testRunner.testCase.getTestStepByName("ProcessParameter").setPropertyValue('now_count',now.toString())
	testRunner.gotoStepByName("GetV1")
}</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="38b78b36-d968-40a0-8798-dbaa3de1a2bf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="post-compare" searchProperties="true"><con:settings/><con:testStep type="properties" name="ProcessParameter" id="97a18c76-308d-40e0-ad55-4c5020bc5aa9"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>now_count</con:name><con:value>1</con:value></con:property><con:property><con:name>max_count</con:name><con:value>3</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="properties" name="RequestInfos" id="55485a0e-a578-4414-a429-f57004436355"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>data1</con:name><con:value>1</con:value></con:property><con:property><con:name>data2</con:name><con:value>2</con:value></con:property><con:property><con:name>data3</con:name><con:value>3</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="properties" name="Response" id="2b02e5ab-2a05-4664-9c51-6fb639d8e879"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>v1_res</con:name><con:value>[{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Freezing"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Bracing"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Chilly"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Cool"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Mild"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Warm"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Balmy"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Hot"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Sweltering"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Scorching"}]</con:value></con:property><con:property><con:name>v2_res</con:name><con:value>[{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Scorching"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Sweltering"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Hot"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Balmy"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Warm"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Mild"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Cool"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Chilly"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Bracing"},{"date":"2019-12-17T00:00:00+08:00","temperatureC":20,"temperatureF":67,"summary":"Freezing"}]</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="PostV1" id="d3536ec6-7df9-4671-a465-c0618822390c"><con:settings/><con:config service="https://localhost:44355" resourcePath="/api/v1" methodName="POST - api/v1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PostV1" id="ae558bd3-bdf1-4796-a82c-3a5a1abbbfc7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://localhost:44355</con:endpoint><con:request>{
    "TestParameter": ${RequestInfos#data${ProcessParameter#now_count}}
}</con:request><con:originalUri>https://localhost/api/v1</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PostV2" id="2595944e-b5ad-46b7-b4ea-2dbbae8bcf7d"><con:settings/><con:config service="https://localhost:44355" resourcePath="/api/v2" methodName="POST - api/v2" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PostV2" id="d1877e22-c97e-4cb9-86d9-c87895cec267" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://localhost:44355</con:endpoint><con:request>{
    "TestParameter": ${RequestInfos#data${ProcessParameter#max_count}}
}</con:request><con:originalUri>https://localhost/api/v2</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="ResponseTransfer" id="3ac3bd50-fed1-4b64-8171-b795ca45b0c0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>v1_res_transfer</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>PostV1</con:sourceStep><con:targetType>v1_res</con:targetType><con:targetStep>Response</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>v2_res_transfer</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>PostV2</con:sourceStep><con:targetType>v2_res</con:targetType><con:targetStep>Response</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="CompareResponse" id="4bf1a396-3cf5-4c84-856b-193166b016ce"><con:settings/><con:config><script>import com.eviware.soapui.support.GroovyUtils

def now =  context.expand('${ProcessParameter#now_count}').toInteger()
def maxCount = context.expand('${ProcessParameter#max_count}').toInteger()
	
def v1_res = context.expand('${Response#v1_res}')
def v1_json = new groovy.json.JsonSlurper().parseText(v1_res)
v1_json.sort()

def v2_res = context.expand('${Response#v2_res}')
def v2_json = new groovy.json.JsonSlurper().parseText(v2_res)
v2_json.sort()

log.info (v1_json)
log.info (v2_json)

assert v1_json == v2_json

if (now == maxCount)
{
	testRunner.testCase.getTestStepByName("ProcessParameter").setPropertyValue('now_count','1')
	log.info 'Loop End'
}
else
{	
	now = now + 1
	testRunner.testCase.getTestStepByName("ProcessParameter").setPropertyValue('now_count',now.toString())
	testRunner.gotoStepByName("PostV1")
}</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>ParameterTemplare1_Value</con:name><con:value>1</con:value></con:property><con:property><con:name>ParameterTemplare2_Value</con:name><con:value>2</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>